  <game>
    <board><size>128</size>

      <grammar>

	<particle>
	  <name>drifter</name>
	  <type>1</type>
	  <colrule><mask>3</mask><hexmul>80000</hexmul></colrule><colrule><mask>0</mask><hexinc>80ffff</hexinc></colrule>
	  <sync/>
	  <rate>.03</rate>

	  <rule><random><prob>.05</prob>
	    <pass><rule><random><prob>.55</prob>
		<pass><rule><modify><srcmask>0</srcmask>
		</modify></rule></pass>
		<fail><rule><modify><srcmask>0</srcmask><hexinc>2000000000000</hexinc><dest><x>1</x></dest>
		</modify></rule></fail>
	    </random></rule></pass>
	    <fail><rule><random>   <!-- x or y -->
		<pass><rule><random>   <!-- right(+1) or left(-1) -->

		    <pass><rule><switch>
			<pos><x>1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><x>1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><x>-1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>-1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><x>-1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></pass>
		<fail><rule><random>   <!-- down(+1) or up(-1) -->

		    <pass><rule><switch>
			<pos><y>1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><y>1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><y>-1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>-1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><y>-1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></fail>
	    </random></rule></fail>
	  </random></rule>
	</particle>

	<particle><name>stepper</name><type>2</type><colrule><mask>3</mask><hexmul>80000</hexmul></colrule><colrule><mask>0</mask><hexinc>ffff</hexinc></colrule>
	  <rate>.03</rate>

	  <rule><random><prob>.05</prob>
	    <pass><rule><random><prob>.55</prob>
		<pass><rule><modify><srcmask>0</srcmask>
		</modify></rule></pass>
		<fail><rule><modify><srcmask>0</srcmask><hexinc>1000000000000</hexinc><dest><x>1</x></dest>
		</modify></rule></fail>
	    </random></rule></pass>
	    <fail><rule><random>   <!-- x or y -->
		<pass><rule><random>   <!-- right(+1) or left(-1) -->

		    <pass><rule><switch>
			<pos><x>1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><x>1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><x>-1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>-1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><x>-1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></pass>
		<fail><rule><random>   <!-- down(+1) or up(-1) -->

		    <pass><rule><switch>
			<pos><y>1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><y>1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><y>-1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>-1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				      <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><y>-1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></fail>
	    </random></rule></fail>
	  </random></rule>

	</particle>
	
      </grammar><init><x>64</x><y>64</y><type>1</type></init>
<seed>0000011747dc5ff214891db08476b70de7cac3e67be2d34954f9f3cb89f7b00d1d79beb91d4d9f2ed8d1af4ffd76df03716bf19420ca886c0b0004aac640e962f232be22db91f485833cdd4ff50c2b232b1942745ef44b40aff331bed7a82a77068383a912d85e1f00ad0cc77ef98efc564a9f49a858951885b5d226ea25b9236cc81f083532d9c8ca7cf092b95eb1ef696842c1da3c886acb4e872b6242afdbb9098ed7de641365df20a7576d547544f9c04a3f5a480e726102c59a41a9499662392493679cbf654c3708e61fc6e5622ea6aa16458c20919e24f9d4c2d1f5ba3c900b9e6439fdc1ef4582c46c4cdf30286285035edf172442b34e9bcee2d5b103f19da56a7f03b3866c2a45b7825bbbf7b074149652db55bbdb3fede9db6cda8ad101aad033cbd1f10e47cac209f0caa1be1f94f63cb652ada11d10dc821ff22012cb928ac905e60cd2d2274693fe9e49a34bbdaa8cae80cffe767ffbc1882b4ee2874a8506bcbf155eceba382538d84606eb493ca42e6e916a0183e18622e166d1c1ea6243dd967aa937f3d68ed5ee2c6f55297da9e8d44ab2b572480289e75395981739c823e67075cd2c8da01a738ba574a41cf202e05ce512f223496c436999689b0feafc7ad5476ce8e2485ee8a7285074b94c5f17256f1b9bdd42cf921a50a755694b904be85a51ec3ae511d367b89518549e01b1d991c829f28d85bbd0351fbc160ba104a3a5fcc0e990dc53b9e73cd84ba52d6005ef03af94726ab98ee8cd7e45ce68b02a99f20797eae3c899a4141633c9bbebe7936d7d28660b8c8e4336e497086d8f9208f3f33eae79f3d8cd215dcf3ec0793829525bb147a74b1ae4a9345c45a5e58f0c708c37afa7b4b9c0eb4c408f3c39ec681127761e31124dd7238b4e224d8a031bbd4f231d77132be60f395845ec008413ca52c0c3cc312b34a08caf39493c6cc46abfe25b3f26b551d607a53e9878f6d403e20628b90d4b1c86a227af2d6ad48f1a8c652a02998e83a903bb453e4c84071766dd6443ab8feb8ebd7a4430538b27f2f4b007c01b072890c15173c095cf4ad33cc7a45d5cf3cec11f5b82344e0b22f502b519eebba78f69d2b056432c7910468af6f52a517e748d16593f06469efa6794f531262879ff7de0ad1c836b50c47ad1e34bc51ed211b4143c0afecb1c8e5287dbd58115a96d1bfdf2df5c87d7b10661806c233cb34712b4147dc27da00ac00c48fd00860811c571d951ff4a041d69de4373c74d1d4296c6ea924aaf5221685b72f402b88bdff710fa49d4b28cbd1d5ec5914639ad543c5ceffa279d572c3a3961a044254c50484005c5ebbf1d30687f9235a5afc1395590ebd1b49125199400a6dd7eb73995322996938a8efe773831448dfd8dbd6af42a2baa16360d62b804b0e184671ac4ccdb7c5d5bd422a693e6c5ee2be63facca89e7b26fd3daca8a3e970ab4332ddf4ccaa217088143d574c2e8cc350f5994d9573a26947c85dd38b9d9e6f9aa34d4b1bc784b64f87dd0ed33481488c42b8751aaf78cbc00c99efcece54c32229bb1fd66ac64ae31959b50774399cf33b655ffe74ef7a8865b037352903eedf9cf6d2f4ac5e22349680bcb667fa04264653d7e83337138b1df0559a7721c4d7ddb29c5e50f9b890cc3edd473d1d371cee07365766a29f24c3122f7ed2806c91cc7453230fe85c7a2cf6972d8627b238588eea0eefcc45aa923abaff45fdf56b97c844dea8f90345e2fa1e11e04369b43f4b839844f33f9e6f2878d785907e9681e7829da34902ff7c801e361689d606b31d2622e54ca8e636bf9301d2f2f1aba0afe17bdaea0f0fd9723a8e935bc164ae540626c107ca3317e14983a18f86dbcc979977464ab51df2595919e71bbd96a24ebd4850ebee4216ab7674bab94762d965a39bd59e6099894a6f1b49c93ca765631ef39c16b80ed6d4ea4e411578a6d3d6ed04b1ec04d09e3431c713b35bcac7e6de0a44efedf385cdb2c10dc15305c256411e7030c1286c3804968b5fae39e5157e99eef1da2550850f060ab6f7af40de8197a0934c77da62633ba8000dec21a8c4ea2cde262ec4e54d35ca0a92e2d028f22aed6595ddb80a63a9be395700ae891c287c743221153a1af4b4b38261feb96669f472a5fb2d88df4e7a11ae3884951bb5ac2e82b8d57e2f33e01c1b74cdbaec16a618a301f3c491b9bf437819442777cd905d34d41291204e7a2fe757a5da001adcfdbb094f5e2443d35fd96d4f2a2f776e97c015621a24f7a9336357003f100fa8f2f29620391cbed14b006fe7926f120ed18a5121305382dba4d7674b74fc089edd1d66fd37cdbca42ab7930fc929e395e9983f7fd9dec3cd2fd500cb02492d915c25fdabd611892c7976885bd1cbb069d2e792b667d4266808d7e6098543aca05b5d5f614cade2eede627d5c487644f51c04cab3362169b08254211fc6f49cc0ac62aa3710a18db0b1bbb51bfd87a0b6ce1a9245210c0a05f68cd83e9ee02c565680942132a7d32761e0d904ccb9911657aff726e00aeeac5c156233a24d33957b8e467843e74649dad32148699de9bd40e1c484ecb842749520d3267cd19562d667f2205f8056094e17307ee058178e565a56250db4e1dead9e940444c5d90a4b3a9748d84c3727ffdcb23a4e8d177d83028e47f218c30bfcf0a20cc4ebcc05fb1cf9ca25767b11332a35d24fc7d79581d7a823eb9f286c7233215058ae7b33b7eab91b3fb82571abaf76129f9df0a1058eda2b64ef51d9854954a0f03fc33fbe20b5e8c6ac034a82a92be6da6f1af82c0390405f1c536677676ee768c35a81a90efaa7c30e6b8970be2542c7229e676739c8425596713e46a1167dd931a2172fe647b79fb2a7db05c0627db2779ea50323c615d5a5c5c307373d2aac585382343feb40dd746a4719c439076d54162c93648d043f05fad6ae6173368801e9fce4476e055d6d4abfbe57c23a837878e913ed8e0e12eb828324e7ec88f649b9c7ea498527f8d98b42adee05e7ece1c47da685f364f25cf839043bacbd8e75bb7e6477c8734cf08847a9ae68707e815e9eb494cdac8abc229815f5f2e579fd5634fe855da6a4d793cd3901de5e028ed88c52554a843dacf08b8f59d7a7468221fa1b0f5babbdea7113de1987d18fd7f5322355d5586a5743213078fa02b75764ca2af833016cc4cf6a6d9eee326a7255cc52e04dd8d4aae3334faeb313f6cee21cf20eb11c65f87ac5cce06a1de0ceb2c50e81f0e346804f5c29e9e075d60479a1766a2d130897cffe8d82964d1e5e6aff302da0074a627f37445c7be5d23ea028a18d7a998cb574cf673e6a2b618f2b71f6db59d8c852ec0f73908cd0945e4078bfd3f4e94a5c3e4d1b0039804df2c1d2bdb615a0fffb277f0ff89d9e8e7ff0b9603c5eacddb9bafbb97ca1bd022ae335eb9221747be990a1a79940882b32a4f46144e8c6f5159f3090d26ee7aa4b35503111dba906826161fa3d111cb4e140fe42a0d1879e2e82a964f27c9ec359f6d</seed>
</board>

    <rate>240</rate> <!-- 240 updates/second is about as fast as we can clock it -->

    <tool>
      <name>tool1</name>
      <size>8</size>
      <hexstate>1000000000000</hexstate>
      <reserve>100</reserve>
      <recharge>100</recharge>
    </tool>

    <tool>
      <name>tool2</name>
      <size>4</size>
      <hexstate>2000000000000</hexstate>
      <reserve>50</reserve>
      <recharge>100</recharge>
    </tool>

    <exit><type>1</type><pos><x>12</x><y>12</y></pos></exit>

    <goal><and>
      <lazy/>
      <goal><cached>
	<goal><population>
	  <type>1</type>
	  <type>2</type>
	  <count><min>20</min></count>
	</population></goal>
      </cached></goal>
      <goal><cached>
	<reps>3</reps>
	<goal><print>
	  <message>You have reached your population target.
	    I will say this three times.</message>
	</print></goal>
      </cached></goal>
      <goal><cached>
	<goal><repeat>
	  <reps>5</reps>
	  <goal><print>
	    <message>(pauses for effect)</message>
	  </print></goal>
	</repeat></goal>
      </cached></goal>
      <goal><cached>
	<goal><and>
	  <lazy/>
	  <cache/>
	  <goal><print><message>The portal is opening...</message></print></goal>
	  <goal><print><message>...wait for it...</message></print></goal>
	  <goal><print><message>...right about NOW!</message></print></goal>
	</and></goal>
      </cached></goal>
      <goal><cached>
	<goal><setexit>
	  <exitstate>PortalCounting</exitstate>
	</setexit></goal>
      </cached></goal>
    </and></goal>
  </game>