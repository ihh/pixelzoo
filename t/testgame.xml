  <game>
    <board><size>128</size>

      <grammar>

	<particle>
	  <name>drifter</name>
	  <type>1</type>
	  <colrule><mask>3</mask><hexmul>80000</hexmul></colrule><colrule><mask>0</mask><hexinc>80ffff</hexinc></colrule>
	  <sync/>
	  <rate>.03</rate>

	  <rule><random><prob>.05</prob>
	    <pass><rule><random><prob>.55</prob>
		<pass><rule><modify><srcmask>0</srcmask>
		</modify></rule></pass>
		<fail><rule><modify><srcmask>0</srcmask><hexinc>2000000000000</hexinc><dest><x>1</x></dest>
		</modify></rule></fail>
	    </random></rule></pass>
	    <fail><rule><random>   <!-- x or y -->
		<pass><rule><random>   <!-- right(+1) or left(-1) -->

		    <pass><rule><switch>
			<pos><x>1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><x>1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><x>-1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>-1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><x>-1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></pass>
		<fail><rule><random>   <!-- down(+1) or up(-1) -->

		    <pass><rule><switch>
			<pos><y>1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><y>1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><y>-1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>-1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>1000000000001</hexinc><dest><y>-1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></fail>
	    </random></rule></fail>
	  </random></rule>
	</particle>

	<particle><name>stepper</name><type>2</type><colrule><mask>3</mask><hexmul>80000</hexmul></colrule><colrule><mask>0</mask><hexinc>ffff</hexinc></colrule>
	  <rate>.03</rate>

	  <rule><random><prob>.05</prob>
	    <pass><rule><random><prob>.55</prob>
		<pass><rule><modify><srcmask>0</srcmask>
		</modify></rule></pass>
		<fail><rule><modify><srcmask>0</srcmask><hexinc>1000000000000</hexinc><dest><x>1</x></dest>
		</modify></rule></fail>
	    </random></rule></pass>
	    <fail><rule><random>   <!-- x or y -->
		<pass><rule><random>   <!-- right(+1) or left(-1) -->

		    <pass><rule><switch>
			<pos><x>1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><x>1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><x>-1</x></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><x>-1</x></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><x>-1</x></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></pass>
		<fail><rule><random>   <!-- down(+1) or up(-1) -->

		    <pass><rule><switch>
			<pos><y>1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				    <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><y>1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></pass>

		    <fail><rule><switch>
			<pos><y>-1</y></pos>
			<mask>ffff000000000000</mask>
			<case><state>0</state><rule><modify>
			    <srcmask>0</srcmask>
			    <next><rule><modify>
				<src><y>-1</y></src><srcmask>ff9</srcmask><hexinc>49</hexinc><dest></dest>
				<next><rule><modify>
				      <srcmask>0</srcmask><hexinc>2000000000001</hexinc><dest><y>-1</y></dest>
				</modify></rule></next>
			    </modify></rule></next>
			</modify></rule></case>
		    </switch></rule></fail>

		</random></rule></fail>
	    </random></rule></fail>
	  </random></rule>

	</particle>
	
      </grammar><init><x>64</x><y>64</y><type>1</type></init>
<seed>0000000044157874c5db553893769b6c1f00739afde900b8c7ab491df540cbaa21d3eb557db65e0dffc1ce1f4657eee7ca6aa9ef8f900a2e70797cef6638dbab1eb5afc4843ee49f9c9c7ab99e21dae8397b76a21b13c1bc9a9a5caa6f1d1f2a67d56af3b05a570cd13a3fb2cbdefb0c3ca95321a31e18dec7f0188aaeac8aee2a474935 6e6dd0e41e87ff97d96c5e479bb2ac1fa1c5726224e7f52f3a129f026eaa300ed1cc1aefe83213fbb2a77741e87333bea0448bc7036cac5b0612fe1196ddd6d76e809ce19d0a07ff8f4cbb43e845529 520bcd953907c2d bcfdba45abddabb656e5a9fd39c367027b68913ccf0248d5b7f54488ef148d6 56829cccac2faccf0fb302b 9400c153099daefdb8b694b69d99fed4e461694fe0b5726e78daba6e6cc63cca4917f2e9b567c1e 42f37ab98138f3c77ef0839fa2d3331da5489f4787902b3 d6176c513c0b168a9bc98d786a92ec0dba09a201d4842a02ce6118357ec74633602c7a2234d140a b28c3633ba5b697ac9bcea531c3b1d8cc6fddc5602ff132b788a8d5ba532c34f9a7e3bff8fde8f1150f6aab8bb51774f8bd7a51187c48cf96af38331418db8d613874c72767c096d8b44214382806c4c150c360d44df8b6b6a00ed117f097aab91128344a096f5cecf6944c35d57249bbf5d652107592beb304e58c98f4749adfb35f286099acb4a53e78bf6774de3ab2b49227f25e738cd71a4981bd27ff5cdca432a676cb541e92295b5e b1163022141a8077c05c91d2bb46096640ae868800e0c18611e53b07ac6891fc50c7fbf7c513bbb1c5be9412267bdef9be67e22decccdc7d06fea93e728cc7ab8b8bcc5676d1431c109f81938484679145ff76b37a68b67f6e437858bdf19ecbbb61e1930305bfc73d5dea0 6f02563 4198e10e4b2d288f203175986264c786c7a65f7200af1d1db1e911f9ec0d09e266c69589a328325 f225374c0e5f220d7af274d77ee490baa2aa5b8b1901d644d85587a5a5a381ac877204d aca2871634fa83d3385da282b433ade 93364b0846e5d2433d13fa6 a68ebf55e0c88f5e9b0949e 3dd234a92d52dd6 19ab7bfe3cf05f616e723ede9ff7c8c9abe25be49db807d4b9538b6b812a13f426e2495 b6d9905cbc1c37776865ec87ca495e135e83a95490be55824ced387c05f0a7aa9bb0e585a05f9b3b9bfa473e5fc11f8b33deed9 5165b3e2b8e4572229f7e7999f3da6e  bcd76e4b3ff2eab0b0a09f93e618f2 f317419d8053096 531bfe0e89f88b633776b5c14cde19f17e052f92b5b46ba8a4981bf1b7e4de33501bcc27d792616eff31a96 6dea89773b89129a47daabd8f7baeab8be3ec13eefaa677410a7b6625c0891a858a1eec720076d9a9977ec17672ee7b6965563e5f8a961b538417f2d7af12454790094c2de23fb6829b363b25427e7163f28a4a1c46410c519c2bfa14fed15e3a48b87889c5c3f1690580d623dff5f3c7083f72159ebd6db37e3335e69b3a09be9af7c6f64e04bf940d1cf0d19ee70b47863cc78adb56a5 9156f4ad2e040d73c514ba061cbc8db6b0a7a1dc5500ee8ac89ffabdec971e0363c3256a8ac13b69a68800363b748ff5f412ba212e6165cf187b256c7d4828cd899f968d8bf6279a4318700d802ec6e29752afbebc1e25a4d1b72563a780edeb03a5708c2ae3759c460a73f 659156e8af5ea55d1087481bd4ce708993dc44b3b26adad  e35f74c863fa772196fdc63d09371559a45b8d573f282029b99c10b38cba42ed7863468f9b3bf76416a3446cdfec4f5fd4b3df9d86f4268a360fa9473beeaa4fe40f38a34ae7214d99c439fd7e754f446bb7ff8da136f6e8025d5dae839c3861c18c0eb564a5e98fe7ebfacc432013d81ee115ea43e03f 294dcb13fbbee361f320777ed7f0f5a 7718f625ff43fd0658a977185830a069bf362f03c03b460259aec81bc96b611b58a394bbd801f6948cb7305f3046f20d313b7aa58fcfd6639c2ac21a97286c0120bc71998d8c3fb7bcf0be517bb31bb 92619337a92816dec8e15af28c576ad3274b52fbb957f5480be5ace81e5f1d55efbd11f270fdc8fbbe03f681d67823034d37b77464452771e23a99d514933c48bfbd8cb7f1699567b5efeeb e3ffb391510f9de6495201a72ae13d3bce016accc578dd76a3a0b45c71df1bc78bb27c7936bf4d527c8af28  b49718f07d5b0ce87176a5384bf950c07215c5e7e530711b37a1d27e0d7d3e73dab3b51216b932e3a816dc2ea4185e5b6ff1d0a1845ee1a92f43cca8b46132 d789d18bbb487c1b4f6d3e857ec55ce11d64e0ecbccac5488f0d7c32666fd88d6a8fa531c3fb233881ee978743bf1efe6677c92e786a01c6170d136c1ca02fbf11e369e3ea7ff516a4a6dff168b6a8641f331d75bc37e207078e6ab583542fba22161d1ac1ca7bcf15b6732d3cb354c5992ed379978c556 583ee2cf76b9228fd5ca0eabb513c686158ee90e7274a6d7bdaf171 e9cfe4f4488c9c4247c7adc67532e8e6408dd1c fac65d6d6417f0bd901cd2bb99fd9aaf98664047939bf9f81a8eb805b61bef34820bb866f6cafb91840736eaf579e9fcde2bc8448eaadb1759b7f2b929b02ddc3d5bf69f332bb0052ece4244ebde97680ef045ca8273f83fb4f081def4edc1ed699870959af4bdedc11649d2f15ba0edd22caa7 7050f3eeed05c89395b06cfd359e2366b8974429182480f e54d257 3e039098800193abdeedac5c7f18e58cc9fdf83d596179151b4481126ea64d851d3602561494e887c4fc9ca6c8be3fdc24760c7756d252597d56d1f5d3d132a8e3e9425e164f769f55d49b777ba454e81e4bf9ddc7ba2c82dea871aa67a3c7a4fc5d9362342e5d5a5f2d44e790972b4fb8a81e36e5c873d5af335c5e3909c0b818b6009193a77f621e94d768878b5eb90e11e3f8e8264b7f15681482c7037b2bbaf125459946aaa be4a3b87d3a3882f0c2d095 87be360281a02b230e99e58b2832f4f 28c7c04700500c172b7aa5d65cd7e923d5d0bd337a59c6fe5c6767b5807f8381ef4ddcb 45d89e6621538341a9cac25a81761a14915c2d62df55caf6b806ccf2fe577f98c52b09a63acd212ba9d8000f9cacdd0655e549d90e312151b3217dbe320fb3c5e4212fa613bc1d6 2aed81c66595958b7c00362585afaea ca1eba38919c37ad515ec429ebc91b548ff6e32b8c7b7a6a5524c24a188ecfb97e02e7490c08a4649a61556852742b6bfdc0c426e34a119f1a3ffc8 5f64e2942b577222a86e96c a08953b8791d3343b5fd1106570fd8766b45b96829c82ea90c2b980373fad6aa733c19ad06b15608e3884a2a882deb83cc6b1ba2c66acc8 de662e7d2c6f7f3db93ef43a1c9d5bd25f0fcc4749d4aeaccd2a1c212bcb8e0107886b51d9c326f3f76b2a8f90a51a26b739184ec56d74bee92e12669f1be6311301aca63d7d076fa6db05d1333fdbc90b6a1b5cf291282c17493bbb8afad189ec3440c6326e259a30afd9f</seed>
</board>

    <rate>240</rate> <!-- 240 updates/second is about as fast as we can clock it -->

    <tool>
      <name>tool1</name>
      <size>8</size>
      <hexstate>1000000000000</hexstate>
      <reserve>100</reserve>
      <recharge>100</recharge>
    </tool>

    <tool>
      <name>tool2</name>
      <size>4</size>
      <hexstate>2000000000000</hexstate>
      <reserve>50</reserve>
      <recharge>100</recharge>
    </tool>

    <exit><type>1</type><pos><x>12</x><y>12</y></pos></exit>

    <goal><and>
      <lazy/>
      <goal><cached>
	<goal><population>
	  <type>1</type>
	  <type>2</type>
	  <count><min>20</min></count>
	</population></goal>
      </cached></goal>
      <goal><cached>
	<reps>3</reps>
	<goal><print>
	  <message>You have reached your population target.
	    I will say this three times.</message>
	</print></goal>
      </cached></goal>
      <goal><cached>
	<goal><repeat>
	  <reps>5</reps>
	  <goal><print>
	    <message>(pauses for effect)</message>
	  </print></goal>
	</repeat></goal>
      </cached></goal>
      <goal><cached>
	<goal><and>
	  <lazy/>
	  <cache/>
	  <goal><print><message>The portal is opening...</message></print></goal>
	  <goal><print><message>...wait for it...</message></print></goal>
	  <goal><print><message>...right about NOW!</message></print></goal>
	</and></goal>
      </cached></goal>
      <goal><cached>
	<goal><setexit>
	  <exitstate>PortalCounting</exitstate>
	</setexit></goal>
      </cached></goal>
    </and></goal>
  </game>
